// ========================================================
// 描述：代替 List —— ReactiveCollection<T>
// 作者：Chinar 
// 创建时间：2018-12-24 01:08:53
// 版 本：1.0
// ========================================================
using System;
using UniRx;
using UnityEngine;


#region Chinar Icon

/*
##########################################################################################################################$
##########################################################################################################################$
##########################################################################################################################$
##########################################################################################################################$
##########################################################################################################################$
##########################################################################################################################$
##########################################################@$@#############################################################$
#######################################################&:     :&##########################################################$
#####################################################|           !########################################################$
##################################################@;               :@#####################################################$
################################################@;                   ;@###################################################$
###############################################|                       |##################################################$
#############################################@:                         '&################################################$
############################################$`                           .$###############################################$
###########################################%.                             .%##############################################$
##########################################$`                               `$#############################################$
#########################################&'                                 '&############################################$
##########################$.    :&#######!                                   !#######&:    .%#############################$
##########################&'       |####&'                                   '&####|       '&#############################$
###########################%.       :@##%.                                   .%##@:       .%##############################$
############################&'       ;##|                                     |##;       '&###############################$
##############################@:     `$#|                                     |#&`     :@#################################$
###################################@&&##%.                                    |##&&@######################################$
################$:.                 '|@#$`                                   `$#@|'                 .;$###################$
###############!                                                                                       !##################$
###############&'                                                                                     '&##################$
################%.                                                                                    %###################$
#################!                                                                                   !####################$
##################!                                                                                 !#####################$
###################|                                                                               |######################$
####################&'                                                                           '&#######################$
######################|                                                                         |#########################$
########################!                                                                     ;###########################$
##########################%.                                                               .|#############################$
############################@;                                                           ;@###############################$
####################@;       `$#$`                                                   `%#$`       ;@#######################$
####################%.       !#&'                         `;`                         `$#|       .%#######################$
#############################%.                          '&#&'                          .%################################$
###########################&'                           !#####!                           '&##############################$
##########################%.                          :@#$%%%$#@;                          .%#############################$
#########################|                          !###&'   '&###!                          |############################$
##########################@;                    .|######&'   '&######|.                    ;@#############################$
###############################$;`         '!&##########&'   '&##########&|'         `;&##################################$
########################################################&'   '&###########################################################$
########################################################&'   '&###########################################################$
########################################################&'   '&###########################################################$
########################################################&'   '&###########################################################$
########################################################&'   '&###########################################################$
########################################################&'   '&###########################################################$
########################################################&'   '&###########################################################$
#########################################################&$$$&############################################################$
##########################################################@@@#############################################################$
####################&$$$$$&######&;`%###################&'   '&###########################################################$
###############|.          %#####$` !###################&'   '&###########################################################$
#############;  .|###############$` !#####################################################################################$
###########&' `$#################$` !#####################################################################################$
###########; '&##################$`            :@########@: ;#########$`      .|########|         ;@#####@:    `$#########$
##########$` !###################$` ;########@: .%#######@: ;#######@:  !####|. '&##############@: `$###$` :@#############$
##########$` |###################$` ;#########%. |#######@: ;#######! `$######$` !#######|.         %###% .%##############$
###########; '&##################$` ;#########%. |#######@: ;#######; '&######&' !#####%. .%#####%  %###% .%##############$
###########@: `$#################$` ;#########%. |#######@: ;#######; '&######&' !#####; :@######%  %###% .%##############$
#############!   !###############$` ;#########%. |#######@: ;#######; '&######&' !#####| .%######%  %###% .%##############$
###############%`          %#####$` ;#########%. |#######@: ;#######; '&######&' !######%.          %###% .%##############$
##########################################################################################################################$
##########################################################################################################################$
##########################################################################################################################$
##########################################################################################################################$
##########################################################################################################################$
##########################################################################################################################$
*/

#endregion


public class ChinarReactiveCollection : MonoBehaviour
{
    #region 响应列表

    /// <summary>
    /// 列表
    /// </summary>
    private ReactiveCollection<string> chinarReactiveCollection = new ReactiveCollection<string>()
    {
        "娱乐：www.chinar.fun",
        "博客：www.chinar.xin"
    };


    /// <summary>
    /// 初始化函数
    /// </summary>
    void Start()
    {
        foreach (var i in chinarReactiveCollection)
        {
            print(i);
        }

        print("----------------------------");
        //观察  列表发生相应变化 并订阅相应 输出信息，为了便于查看
        chinarReactiveCollection.ObserveAdd().Subscribe(_ => print("添加："          + _));
        chinarReactiveCollection.ObserveMove().Subscribe(_ => print("移除："         + _));
        chinarReactiveCollection.ObserveCountChanged().Subscribe(_ => print("数量：" + _));
        chinarReactiveCollection.ObserveReplace().Subscribe(_ => print("替换："      + _));
        chinarReactiveCollection.ObserveReset().Subscribe(_ => print("重置："        + _));
        //测试列表信息变动 (只要数量发生改变，ObserveCountChanged 都会被调用，所以一下不用写)
        chinarReactiveCollection.Add("Chinar-添加");            //对应 —— ObserveAdd
        chinarReactiveCollection.Remove("博客：www.chinar.xin"); //—— ObserveMove
        chinarReactiveCollection[0] = "Chinar-替换";            //—— ObserveReplace
        chinarReactiveCollection.Clear();                     //—— ObserveReset
        ChinarReactiveDictionary();
    }

    #endregion
    #region 响应字典

    /// <summary>
    /// 字典
    /// </summary>
    private ReactiveDictionary<int, string> chinarReactiveDictionary = new ReactiveDictionary<int, string>();


    /// <summary>
    /// 测试字典
    /// </summary>
    private void ChinarReactiveDictionary()
    {
        Print("----------------以下为字典测试----------------");
        //观察  列表发生相应变化 并订阅相应 输出信息，为了便于查看
        chinarReactiveDictionary.ObserveAdd().Subscribe(_ => Print("添加："          + _));
        chinarReactiveDictionary.ObserveRemove().Subscribe(_ => PrintR("移除："      + _));
        chinarReactiveDictionary.ObserveCountChanged().Subscribe(_ => print("数量：" + _));
        chinarReactiveDictionary.ObserveReplace().Subscribe(_ => print("替换："      + _));
        chinarReactiveDictionary.ObserveReset().Subscribe(_ => print("重置："        + _));
        //测试列表信息变动 (只要数量发生改变，ObserveCountChanged 都会被调用，所以一下不用写)
        chinarReactiveDictionary.Add(0, "A");      //对应 —— ObserveAdd
        chinarReactiveDictionary.Add(1, "B");      //对应 —— ObserveAdd
        chinarReactiveDictionary.Remove(0);        //—— ObserveRemove
        chinarReactiveDictionary[0] = "Chinar-替换"; //—— ObserveReplace
        chinarReactiveDictionary.Clear();          //—— ObserveReset
    }

    #endregion


    public void Print(string str)
    {
        print($"<b><color=lime><size={12}>{str}</size></color></b>");
    }


    public static void PrintR(string str)
    {
        print($"<b><color=red><size={12}>{str}</size></color></b>");
    }
}

